@{
    ViewBag.Title = "Index";
    Layout = "";
}

<h2>Index</h2>

@{
    string loginID = "2rBH6x5n";
    string transactionKey = "776J47Be8kKA9Ccr";
    string amount = "19.99";
    string description = "Sample Transaction";
    string label = "Submit Payment"; // The is the label on the 'submit' button
    string testMode = "true";
    
    
    // By default, this sample code is designed to post to our test server for
    // developer accounts: https://test.authorize.net/gateway/transact.dll
    // for real accounts (even in test mode), please make sure that you are
    // posting to: https://secure.authorize.net/gateway/transact.dll
    string url = "https://test.authorize.net/gateway/transact.dll";

    string invoice = DateTime.Now.ToString("YmdHis");
    string sequence = "123";
    string timeStamp = DateTime.Now.ToString("yyyyMMddHHmmssffff");

    // The following lines generate the SIM fingerprint.  PHP versions 5.1.2 and
    // newer have the necessary hmac function built in.  For older versions, it
    // will try to use the mhash library.
    string fingerprint = Acceleration.Hmac.Hasher.ComputeHash(loginID + "^" + sequence + "^" + timeStamp + "^" + amount + "^" + transactionKey);
}

<!-- Create the HTML form containing necessary SIM post values -->
<form method='post' action='@url'>
    <!--  Additional fields can be added here as outlined in the SIM integration
     guide at: http://developer.authorize.net -->
    <input type='hidden' name='x_login' value='@loginID' />
    <input type='hidden' name='x_amount' value='@amount' />
    <input type='hidden' name='x_description' value='@description' />
    <input type='hidden' name='x_invoice_num' value='@invoice' />
    <input type='hidden' name='x_fp_sequence' value='@sequence' />
    <input type='hidden' name='x_fp_timestamp' value='@timeStamp' />
    <input type='hidden' name='x_fp_hash' value='@fingerprint' />
    <input type='hidden' name='x_test_request' value='@testMode' />
    <input type='hidden' name='x_show_form' value='PAYMENT_FORM' />
    <input type='submit' value='@label' />
</form>